module.exports = [
"[project]/apps/web/.next-internal/server/app/api/agents/chat/route/actions.js [app-rsc] (server actions loader, ecmascript)", ((__turbopack_context__, module, exports) => {

}),
"[externals]/next/dist/compiled/next-server/app-route-turbo.runtime.dev.js [external] (next/dist/compiled/next-server/app-route-turbo.runtime.dev.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/compiled/next-server/app-route-turbo.runtime.dev.js", () => require("next/dist/compiled/next-server/app-route-turbo.runtime.dev.js"));

module.exports = mod;
}),
"[externals]/next/dist/compiled/@opentelemetry/api [external] (next/dist/compiled/@opentelemetry/api, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/compiled/@opentelemetry/api", () => require("next/dist/compiled/@opentelemetry/api"));

module.exports = mod;
}),
"[externals]/next/dist/compiled/next-server/app-page-turbo.runtime.dev.js [external] (next/dist/compiled/next-server/app-page-turbo.runtime.dev.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/compiled/next-server/app-page-turbo.runtime.dev.js", () => require("next/dist/compiled/next-server/app-page-turbo.runtime.dev.js"));

module.exports = mod;
}),
"[externals]/next/dist/server/app-render/work-unit-async-storage.external.js [external] (next/dist/server/app-render/work-unit-async-storage.external.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/server/app-render/work-unit-async-storage.external.js", () => require("next/dist/server/app-render/work-unit-async-storage.external.js"));

module.exports = mod;
}),
"[externals]/next/dist/server/app-render/work-async-storage.external.js [external] (next/dist/server/app-render/work-async-storage.external.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/server/app-render/work-async-storage.external.js", () => require("next/dist/server/app-render/work-async-storage.external.js"));

module.exports = mod;
}),
"[externals]/next/dist/shared/lib/no-fallback-error.external.js [external] (next/dist/shared/lib/no-fallback-error.external.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/shared/lib/no-fallback-error.external.js", () => require("next/dist/shared/lib/no-fallback-error.external.js"));

module.exports = mod;
}),
"[externals]/next/dist/server/app-render/after-task-async-storage.external.js [external] (next/dist/server/app-render/after-task-async-storage.external.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/server/app-render/after-task-async-storage.external.js", () => require("next/dist/server/app-render/after-task-async-storage.external.js"));

module.exports = mod;
}),
"[externals]/next/dist/server/app-render/action-async-storage.external.js [external] (next/dist/server/app-render/action-async-storage.external.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/server/app-render/action-async-storage.external.js", () => require("next/dist/server/app-render/action-async-storage.external.js"));

module.exports = mod;
}),
"[externals]/node:process [external] (node:process, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("node:process", () => require("node:process"));

module.exports = mod;
}),
"[externals]/node:events [external] (node:events, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("node:events", () => require("node:events"));

module.exports = mod;
}),
"[externals]/node:crypto [external] (node:crypto, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("node:crypto", () => require("node:crypto"));

module.exports = mod;
}),
"[externals]/node:stream [external] (node:stream, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("node:stream", () => require("node:stream"));

module.exports = mod;
}),
"[externals]/node:stream/web [external] (node:stream/web, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("node:stream/web", () => require("node:stream/web"));

module.exports = mod;
}),
"[externals]/node:async_hooks [external] (node:async_hooks, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("node:async_hooks", () => require("node:async_hooks"));

module.exports = mod;
}),
"[externals]/tty [external] (tty, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("tty", () => require("tty"));

module.exports = mod;
}),
"[externals]/util [external] (util, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("util", () => require("util"));

module.exports = mod;
}),
"[externals]/os [external] (os, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("os", () => require("os"));

module.exports = mod;
}),
"[externals]/node:timers [external] (node:timers, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("node:timers", () => require("node:timers"));

module.exports = mod;
}),
"[externals]/node:events [external] (node:events, cjs) <export EventEmitter as RuntimeEventEmitter>", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "RuntimeEventEmitter",
    ()=>__TURBOPACK__imported__module__$5b$externals$5d2f$node$3a$events__$5b$external$5d$__$28$node$3a$events$2c$__cjs$29$__["EventEmitter"]
]);
var __TURBOPACK__imported__module__$5b$externals$5d2f$node$3a$events__$5b$external$5d$__$28$node$3a$events$2c$__cjs$29$__ = __turbopack_context__.i("[externals]/node:events [external] (node:events, cjs)");
}),
"[externals]/events [external] (events, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("events", () => require("events"));

module.exports = mod;
}),
"[externals]/https [external] (https, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("https", () => require("https"));

module.exports = mod;
}),
"[externals]/http [external] (http, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("http", () => require("http"));

module.exports = mod;
}),
"[externals]/net [external] (net, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("net", () => require("net"));

module.exports = mod;
}),
"[externals]/tls [external] (tls, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("tls", () => require("tls"));

module.exports = mod;
}),
"[externals]/crypto [external] (crypto, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("crypto", () => require("crypto"));

module.exports = mod;
}),
"[externals]/stream [external] (stream, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("stream", () => require("stream"));

module.exports = mod;
}),
"[externals]/url [external] (url, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("url", () => require("url"));

module.exports = mod;
}),
"[externals]/zlib [external] (zlib, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("zlib", () => require("zlib"));

module.exports = mod;
}),
"[externals]/buffer [external] (buffer, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("buffer", () => require("buffer"));

module.exports = mod;
}),
"[externals]/module [external] (module, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("module", () => require("module"));

module.exports = mod;
}),
"[externals]/path [external] (path, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("path", () => require("path"));

module.exports = mod;
}),
"[project]/apps/web/convex/_generated/api.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

/* eslint-disable */ /**
 * Generated `api` utility.
 *
 * THIS CODE IS AUTOMATICALLY GENERATED.
 *
 * To regenerate, run `npx convex dev`.
 * @module
 */ __turbopack_context__.s([
    "api",
    ()=>api,
    "internal",
    ()=>internal
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$convex$2f$dist$2f$esm$2f$server$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/convex/dist/esm/server/index.js [app-route] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$convex$2f$dist$2f$esm$2f$server$2f$api$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/convex/dist/esm/server/api.js [app-route] (ecmascript)");
;
const api = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$convex$2f$dist$2f$esm$2f$server$2f$api$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["anyApi"];
const internal = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$convex$2f$dist$2f$esm$2f$server$2f$api$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["anyApi"];
}),
"[externals]/fs [external] (fs, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("fs", () => require("fs"));

module.exports = mod;
}),
"[externals]/assert [external] (assert, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("assert", () => require("assert"));

module.exports = mod;
}),
"[project]/apps/web/src/app/agentActions.ts [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "analyzeWebsiteViaFirecrawl",
    ()=>analyzeWebsiteViaFirecrawl,
    "deepResearchAnything",
    ()=>deepResearchAnything
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$mendable$2f$firecrawl$2d$js$2f$dist$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@mendable/firecrawl-js/dist/index.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__ = __turbopack_context__.i("[project]/node_modules/zod/v3/external.js [app-route] (ecmascript) <export * as z>");
;
;
const firecrawl = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$mendable$2f$firecrawl$2d$js$2f$dist$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["default"]({
    apiKey: ("TURBOPACK compile-time truthy", 1) ? ("TURBOPACK compile-time value", "fc-e9ff764fdf4a4043b2a7c23a3b0451df") : "TURBOPACK unreachable"
});
function quickFormatUrl(url) {
    if (!url.startsWith("http://") && !url.startsWith("https://")) {
        return "https://" + url;
    }
    return url;
}
async function analyzeWebsiteViaFirecrawl(url, analysisType) {
    const formattedUrl = quickFormatUrl(url);
    // Define the structured schema we want from any website with content type
    const WebsiteSummarySchema = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].object({
        summaryOfTheBusiness: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string().describe("A summary of the business, go into detail as much as possible."),
        aboutTheBusiness: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string().describe("About the business; useful background for understanding the company."),
        servicesOffered: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string().describe("Services they offer with details."),
        whereTheyServe: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string().describe("Where they serve, geography/markets.")
    });
    // Define the structured schema we want from any website with gather-style-of-speaking type
    const GatherStyleOfSpeakingSchema = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].object({
        toneAndVoice: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string().describe("The overall tone and voice of the website - formal, casual, professional, friendly, authoritative, conversational, etc."),
        writingStyle: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string().describe("The writing style characteristics - sentence structure, paragraph length, use of technical jargon, storytelling approach, etc."),
        languagePatterns: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string().describe("Specific language patterns, vocabulary choices, industry terminology, colloquialisms, and recurring phrases or expressions."),
        communicationApproach: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string().describe("How they communicate with their audience - direct vs indirect, educational vs promotional, problem-focused vs solution-focused, etc."),
        emotionalTone: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string().describe("The emotional undertone of the content - enthusiastic, empathetic, urgent, reassuring, confident, humble, etc."),
        brandPersonality: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string().describe("The personality that comes through in the writing - innovative, traditional, rebellious, trustworthy, cutting-edge, established, etc."),
        rhetoricalDevices: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string().describe("Use of questions, calls-to-action, testimonials, statistics, storytelling, metaphors, or other persuasive techniques."),
        audienceAddressing: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string().describe("How they address their audience - formal titles, first person, second person, inclusive language, industry-specific addressing, etc."),
        contentStructure: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string().describe("How they organize and present information - bullet points, numbered lists, headers, short vs long-form content, etc."),
        examplePhrases: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].array(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string()).describe("Specific example phrases, sentences, or word choices that exemplify their style of communication.")
    });
    let schema;
    let prompt;
    let systemPrompt;
    if (analysisType === 'gather-style-of-speaking') {
        schema = GatherStyleOfSpeakingSchema;
        prompt = "Extract the style of speaking of the website.";
        systemPrompt = "You are a helpful assistant that extracts the style of speaking of the website.";
    } else {
        schema = WebsiteSummarySchema;
        prompt = "Extract the summary of the business, about the business, services offered, and where they serve.";
        systemPrompt = "You are a helpful assistant that extracts the summary of the business, about the business, services offered, and where they serve.";
    }
    // Use Firecrawl Extract with schema. We keep scrapeOptions lean for speed; limit is not used by extract directly.
    const extraction = await firecrawl.extract([
        formattedUrl
    ], {
        schema: schema,
        scrapeOptions: {
            onlyMainContent: true
        },
        prompt: prompt,
        systemPrompt: systemPrompt,
        showSources: true,
        includeSubdomains: true,
        enableWebSearch: false
    });
    const structured = extraction?.data;
    const payload = {
        success: true,
        source: {
            url: formattedUrl,
            fetchedAt: new Date().toISOString()
        },
        contentType: "json",
        // Keep a string content for backwards compatibility, but prefer `structured` downstream
        content: structured ? JSON.stringify(structured) : "",
        structured
    };
    return payload;
}
async function deepResearchAnything(researchQuery, websiteUrl) {
    // Create completely flexible schema for ANY research topic
    const UniversalResearchSchema = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].object({
        query: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string().describe("The research question that was answered"),
        keyFindings: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string().describe("The main findings and insights from the research"),
        detailedAnalysis: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string().describe("Comprehensive analysis addressing the specific query"),
        supporting_evidence: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string().describe("Specific evidence, data, sources, and examples found during research"),
        conclusions: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string().describe("Conclusions and insights drawn from the research"),
        actionableInsights: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string().describe("Practical, actionable insights relevant to the query"),
        relatedTopics: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string().describe("Related topics or areas for further research"),
        fullReportMarkdown: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string().describe("Complete research report in well-structured Markdown format addressing the specific query")
    });
    // If a website is provided, include it in the query, otherwise research the topic generally
    const query = websiteUrl ? `${researchQuery} - Include analysis of this website: ${quickFormatUrl(websiteUrl)}` : researchQuery;
    const analysisPrompt = `${researchQuery}

Conduct thorough, comprehensive research to answer this query. Use all available sources and provide detailed, evidence-based analysis. Structure your response to directly address the question with supporting evidence and actionable insights.

Be comprehensive and include:
- Specific examples and data
- Multiple perspectives when relevant  
- Current and up-to-date information
- Actionable conclusions
- Clear, well-organized analysis

${websiteUrl ? 'Include specific analysis of the provided website as a primary source.' : 'Research broadly using all available sources.'}`;
    const systemPrompt = "You are a senior research analyst capable of researching any topic thoroughly. Provide comprehensive, evidence-based analysis that directly addresses the research query. Be precise, detailed, and focus on actionable insights.";
    const research = await firecrawl.deepResearch(query, {
        maxDepth: 5,
        timeLimit: 300,
        maxUrls: websiteUrl ? 15 : 25,
        analysisPrompt: analysisPrompt,
        systemPrompt: systemPrompt,
        formats: [
            "markdown",
            "json"
        ],
        jsonOptions: {
            schema: UniversalResearchSchema,
            systemPrompt: "Return comprehensive research results in valid JSON format. Address the specific research query thoroughly in each field.",
            prompt: "Provide detailed, well-researched answers in each field. The fullReportMarkdown should be a complete, professional research report."
        }
    });
    return research;
}
;
}),
"[project]/apps/web/src/services/pineconeService.ts [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "addEmployeeDataToIndex",
    ()=>addEmployeeDataToIndex,
    "addToIndex",
    ()=>addToIndex,
    "addTranscriptDataToIndex",
    ()=>addTranscriptDataToIndex,
    "createIndex",
    ()=>createIndex,
    "getApiKey",
    ()=>getApiKey,
    "listIndexesFromPinecone",
    ()=>listIndexesFromPinecone,
    "pc",
    ()=>pc,
    "semanticSearch",
    ()=>semanticSearch
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$pinecone$2d$database$2f$pinecone$2f$dist$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@pinecone-database/pinecone/dist/index.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$dotenv$2f$lib$2f$main$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/dotenv/lib/main.js [app-route] (ecmascript)");
;
;
__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$dotenv$2f$lib$2f$main$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["default"].config();
const getApiKey = ()=>{
    const apiKey = ("TURBOPACK compile-time falsy", 0) ? "TURBOPACK unreachable" : ("TURBOPACK compile-time value", "pcsk_pVqpJ_S6WaMj68tcvSJ3QsQNmWV2AppcoNJjEPUguDDqHW6eiBs7WHp5XpbWEJANifrEd");
    return apiKey || '';
};
const pc = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$pinecone$2d$database$2f$pinecone$2f$dist$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["Pinecone"]({
    apiKey: getApiKey()
});
;
async function createIndex(indexName) {
    try {
        await pc.createIndexForModel({
            name: indexName,
            cloud: 'aws',
            region: 'us-east-1',
            embed: {
                model: 'llama-text-embed-v2',
                fieldMap: {
                    text: 'chunk_text'
                }
            },
            waitUntilReady: true
        });
        return {
            success: true
        };
    } catch (error) {
        console.error('Error creating index:', error);
        throw new Error(`Failed to create index: ${error instanceof Error ? error.message : 'Unknown error'}`);
    }
}
// Helper function to estimate metadata size in bytes
function estimateMetadataSize(metadata) {
    return JSON.stringify(metadata).length * 2; // Rough estimate (UTF-16)
}
// Helper function to split large metadata into smaller chunks
function splitMetadata(metadata, maxSizeBytes = 30000) {
    const metadataStr = JSON.stringify(metadata);
    const estimatedSize = metadataStr.length * 2;
    if (estimatedSize <= maxSizeBytes) {
        return [
            metadata
        ];
    }
    // Split large arrays and strings
    const chunks = [];
    const baseMetadata = {
        ...metadata
    };
    // Handle large array fields
    const arrayFields = [
        'participants',
        'action_items',
        'concepts_discussed',
        'key_topics'
    ];
    for (const field of arrayFields){
        if (Array.isArray(baseMetadata[field]) && baseMetadata[field].length > 10) {
            const items = baseMetadata[field];
            const chunkSize = Math.ceil(items.length / Math.ceil(estimatedSize / maxSizeBytes));
            for(let i = 0; i < items.length; i += chunkSize){
                const chunk = {
                    ...baseMetadata,
                    [field]: items.slice(i, i + chunkSize),
                    chunk_index: Math.floor(i / chunkSize),
                    total_chunks: Math.ceil(items.length / chunkSize)
                };
                chunks.push(chunk);
            }
            // Remove the original field from base metadata
            delete baseMetadata[field];
        }
    }
    // If no chunks were created, create one with reduced metadata
    if (chunks.length === 0) {
        const reducedMetadata = {
            ...baseMetadata
        };
        // Remove or truncate large string fields
        if (reducedMetadata.summary && reducedMetadata.summary.length > 1000) {
            reducedMetadata.summary = reducedMetadata.summary.substring(0, 1000) + '...';
        }
        chunks.push(reducedMetadata);
    }
    return chunks;
}
// Helper function to chunk large content
function chunkContent(content, maxChunkSize = 2000) {
    if (content.length <= maxChunkSize) {
        return [
            content
        ];
    }
    const chunks = [];
    const sentences = content.split(/[.!?]+/).filter((s)=>s.trim().length > 0);
    let currentChunk = '';
    for (const sentence of sentences){
        const trimmedSentence = sentence.trim();
        if (currentChunk.length + trimmedSentence.length + 1 <= maxChunkSize) {
            currentChunk += (currentChunk ? '. ' : '') + trimmedSentence;
        } else {
            if (currentChunk) {
                chunks.push(currentChunk + '.');
            }
            currentChunk = trimmedSentence;
        }
    }
    if (currentChunk) {
        chunks.push(currentChunk + '.');
    }
    return chunks;
}
async function addToIndex(indexName, data) {
    try {
        const index = pc.index(indexName);
        // Chunk the content if it's too large
        const contentChunks = chunkContent(data.content);
        // Split metadata if it's too large
        const metadataChunks = data.metadata ? splitMetadata(data.metadata) : [
            {}
        ];
        const records = [];
        // Create records for each combination of content and metadata chunks
        for(let i = 0; i < contentChunks.length; i++){
            for(let j = 0; j < metadataChunks.length; j++){
                const id = `${Date.now()}-${Math.random().toString(36).substr(2, 9)}-${i}-${j}`;
                const record = {
                    _id: id,
                    chunk_text: contentChunks[i],
                    title: data.title,
                    content_chunk_index: i,
                    total_content_chunks: contentChunks.length,
                    ...metadataChunks[j],
                    created_at: new Date().toISOString()
                };
                // Check if this record would be too large
                const estimatedSize = estimateMetadataSize(record);
                if (estimatedSize > 35000) {
                    console.warn(`Record ${id} is still too large (${estimatedSize} bytes), further reducing...`);
                    // Further reduce the record
                    record.chunk_text = record.chunk_text.substring(0, 1000) + '...';
                    if (record.summary) {
                        record.summary = record.summary.substring(0, 500) + '...';
                    }
                }
                records.push(record);
            }
        }
        // Batch upsert records
        const batchSize = 100; // Pinecone batch limit
        for(let i = 0; i < records.length; i += batchSize){
            const batch = records.slice(i, i + batchSize);
            await index.upsertRecords(batch);
        }
        return {
            success: true,
            id: records[0]._id,
            totalChunks: records.length
        };
    } catch (error) {
        console.error('Error adding to index:', error);
        throw new Error(`Failed to add to index: ${error instanceof Error ? error.message : 'Unknown error'}`);
    }
}
async function addEmployeeDataToIndex(indexName, data) {
    try {
        const index = pc.index(indexName);
        const { employeeData, tags = [], source } = data;
        // Create searchable content from employee data
        const searchableContent = createEmployeeSearchableContent(employeeData);
        // Chunk the content if it's too large
        const contentChunks = chunkContent(searchableContent);
        const records = [];
        // Create records for each content chunk
        for(let i = 0; i < contentChunks.length; i++){
            const id = `${employeeData.employeeId}-${Date.now()}-${i}`;
            const record = {
                _id: id,
                chunk_text: contentChunks[i],
                title: `${employeeData.name} - ${employeeData.position}`,
                content_chunk_index: i,
                total_content_chunks: contentChunks.length,
                // Employee-specific metadata
                employeeId: employeeData.employeeId,
                name: employeeData.name,
                organization: employeeData.organization,
                position: employeeData.position,
                reportsTo: employeeData.reportsTo,
                gender: employeeData.gender,
                assessmentDate: employeeData.assessmentDate,
                leadDomain: employeeData.leadDomain,
                // Arrays as comma-separated strings for better searchability
                all34: Array.isArray(employeeData.all34) ? employeeData.all34.join(', ') : employeeData.all34,
                motivators: Array.isArray(employeeData.motivators) ? employeeData.motivators.join(', ') : employeeData.motivators,
                demotivators: Array.isArray(employeeData.demotivators) ? employeeData.demotivators.join(', ') : employeeData.demotivators,
                // Text fields
                bestCollabWith: employeeData.bestCollabWith,
                communicationTips: employeeData.communicationTips,
                howToCoach: employeeData.howToCoach,
                watchouts: employeeData.watchouts,
                // Theme domains as JSON strings
                themeDomains: JSON.stringify(employeeData.themeDomains),
                evidenceQuotes: JSON.stringify(employeeData.evidenceQuotes),
                // Source information
                sourceDocUrl: employeeData.sourceDocUrl,
                sourceProvenance: employeeData.sourceProvenance,
                // Additional metadata
                tags: Array.isArray(tags) ? tags.join(', ') : tags,
                source: source,
                created_at: new Date().toISOString(),
                data_type: 'employee_profile'
            };
            // Check if this record would be too large
            const estimatedSize = estimateMetadataSize(record);
            if (estimatedSize > 35000) {
                console.warn(`Record ${id} is still too large (${estimatedSize} bytes), further reducing...`);
                // Further reduce the record
                record.chunk_text = record.chunk_text.substring(0, 1000) + '...';
                if (record.bestCollabWith) {
                    record.bestCollabWith = record.bestCollabWith.substring(0, 500) + '...';
                }
            }
            records.push(record);
        }
        // Batch upsert records
        const batchSize = 100; // Pinecone batch limit
        for(let i = 0; i < records.length; i += batchSize){
            const batch = records.slice(i, i + batchSize);
            await index.upsertRecords(batch);
        }
        return {
            success: true,
            id: records[0]._id,
            totalChunks: records.length
        };
    } catch (error) {
        console.error('Error adding employee data to index:', error);
        throw new Error(`Failed to add employee data to index: ${error instanceof Error ? error.message : 'Unknown error'}`);
    }
}
async function addTranscriptDataToIndex(indexName, data) {
    try {
        const index = pc.index(indexName);
        const { transcriptData, tags = [], source } = data;
        const searchableContent = createTranscriptSearchableContent(transcriptData);
        const contentChunks = chunkContent(searchableContent);
        const records = [];
        for(let i = 0; i < contentChunks.length; i++){
            const id = `${transcriptData.date || 'unknown-date'}-${Date.now()}-${i}`;
            const record = {
                _id: id,
                chunk_text: contentChunks[i],
                title: `${transcriptData.title || 'Transcript'}${transcriptData.date ? ' - ' + transcriptData.date : ''}`,
                content_chunk_index: i,
                total_content_chunks: contentChunks.length,
                meetingType: transcriptData.meetingType,
                duration: transcriptData.duration,
                participants: Array.isArray(transcriptData.participants) ? transcriptData.participants.join(', ') : transcriptData.participants,
                location: transcriptData.location,
                department: transcriptData.department,
                confidentialityLevel: transcriptData.confidentialityLevel,
                action_items: Array.isArray(transcriptData.action_items) ? transcriptData.action_items.join(', ') : transcriptData.action_items,
                concepts_discussed: Array.isArray(transcriptData.concepts_discussed) ? transcriptData.concepts_discussed.join(', ') : transcriptData.concepts_discussed,
                date: transcriptData.date,
                key_topics: Array.isArray(transcriptData.key_topics) ? transcriptData.key_topics.join(', ') : transcriptData.key_topics,
                summary: transcriptData.summary,
                tags: Array.isArray(tags) ? tags.join(', ') : tags,
                source: source,
                created_at: new Date().toISOString(),
                data_type: 'transcript'
            };
            const estimatedSize = estimateMetadataSize(record);
            if (estimatedSize > 35000) {
                console.warn(`Transcript record ${id} is too large (${estimatedSize} bytes), reducing...`);
                record.chunk_text = record.chunk_text.substring(0, 1000) + '...';
                if (record.summary && typeof record.summary === 'string') {
                    record.summary = record.summary.substring(0, 500) + '...';
                }
            }
            records.push(record);
        }
        const batchSize = 100;
        for(let i = 0; i < records.length; i += batchSize){
            const batch = records.slice(i, i + batchSize);
            await index.upsertRecords(batch);
        }
        return {
            success: true,
            id: records[0]._id,
            totalChunks: records.length
        };
    } catch (error) {
        console.error('Error adding transcript data to index:', error);
        throw new Error(`Failed to add transcript data to index: ${error instanceof Error ? error.message : 'Unknown error'}`);
    }
}
// Helper function to create searchable content from employee data
function createEmployeeSearchableContent(employeeData) {
    const strengths = Array.isArray(employeeData.all34) ? employeeData.all34.join(', ') : employeeData.all34;
    const motivators = Array.isArray(employeeData.motivators) ? employeeData.motivators.join(', ') : employeeData.motivators;
    const demotivators = Array.isArray(employeeData.demotivators) ? employeeData.demotivators.join(', ') : employeeData.demotivators;
    return `Employee Profile: ${employeeData.name}
Position: ${employeeData.position}
Organization: ${employeeData.organization}
Reports To: ${employeeData.reportsTo}
Lead Domain: ${employeeData.leadDomain}
Assessment Date: ${employeeData.assessmentDate}

Strengths: ${strengths}

Best Collaboration: ${employeeData.bestCollabWith}

Communication Tips: ${employeeData.communicationTips}

How to Coach: ${employeeData.howToCoach}

Motivators: ${motivators}

Demotivators: ${demotivators}

Watchouts: ${employeeData.watchouts}

Theme Domains: ${JSON.stringify(employeeData.themeDomains)}

Evidence Quotes: ${JSON.stringify(employeeData.evidenceQuotes)}`;
}
function createTranscriptSearchableContent(transcriptData) {
    const participants = Array.isArray(transcriptData.participants) ? transcriptData.participants.join(', ') : transcriptData.participants;
    const actionItems = Array.isArray(transcriptData.action_items) ? transcriptData.action_items.join('; ') : transcriptData.action_items;
    const conceptsDiscussed = Array.isArray(transcriptData.concepts_discussed) ? transcriptData.concepts_discussed.join('; ') : transcriptData.concepts_discussed;
    const keyTopics = Array.isArray(transcriptData.key_topics) ? transcriptData.key_topics.join('; ') : transcriptData.key_topics;
    return `Transcript Summary
Meeting Type: ${transcriptData.meetingType || 'N/A'}
Date: ${transcriptData.date || 'N/A'}
Duration: ${typeof transcriptData.duration === 'number' ? `${transcriptData.duration} min` : 'N/A'}
Participants: ${participants || 'N/A'}
Location: ${transcriptData.location || 'N/A'}
Department: ${transcriptData.department || 'N/A'}
Confidentiality: ${transcriptData.confidentialityLevel || 'N/A'}

Key Topics: ${keyTopics || 'N/A'}
Concepts Discussed: ${conceptsDiscussed || 'N/A'}
Action Items: ${actionItems || 'N/A'}

Summary: ${transcriptData.summary || 'N/A'}`;
}
async function listIndexesFromPinecone() {
    try {
        const indexes = await pc.listIndexes();
        return indexes;
    } catch (error) {
        console.error('Error listing indexes:', error);
        throw new Error(`Failed to list indexes: ${error instanceof Error ? error.message : 'Unknown error'}`);
    }
}
async function semanticSearch(indexName, params) {
    try {
        const index = pc.index(indexName);
        const targetNamespace = params.namespace && params.namespace.length > 0 ? params.namespace : '__default__';
        const namespace = index.namespace(targetNamespace);
        const response = await namespace.searchRecords({
            query: {
                topK: params.topK ?? 5,
                inputs: {
                    text: params.query
                }
            },
            // If fields are not specified, Pinecone returns all fields
            fields: params.fields && params.fields.length > 0 ? params.fields : undefined
        });
        return response;
    } catch (error) {
        console.error('Error performing semantic search:', error);
        throw new Error(`Failed to perform semantic search: ${error instanceof Error ? error.message : 'Unknown error'}`);
    }
}
}),
"[project]/apps/web/src/types/metadata.ts [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "INDEX_TYPES",
    ()=>INDEX_TYPES,
    "getMetadataFieldsForIndex",
    ()=>getMetadataFieldsForIndex
]);
const INDEX_TYPES = {
    'dope-email-templates': 'Email Templates',
    'dope-transcript-data': 'Transcript Data',
    'dope-faq-data': 'FAQ Data',
    'dope-company-knowledge': 'Company Knowledge',
    'dope-employee-data': 'Employee Data'
};
function getMetadataFieldsForIndex(indexName) {
    switch(indexName){
        case 'dope-email-templates':
            return [
                'templateName',
                'category',
                'subject',
                'language',
                'targetAudience',
                'priority'
            ];
        case 'dope-transcript-data':
            return [
                'meetingType',
                'duration',
                'participants',
                'location',
                'department',
                'confidentialityLevel',
                'action_items',
                'concepts_discussed',
                'date',
                'key_topics',
                'summary'
            ];
        case 'dope-faq-data':
            return [
                'category',
                'difficulty',
                'relatedProducts',
                'lastReviewed',
                'popularity',
                'keywords'
            ];
        case 'dope-company-knowledge':
            return [
                'department',
                'documentType',
                'accessLevel',
                'version',
                'approver',
                'expirationDate'
            ];
        case 'dope-employee-data':
            return [
                'tags'
            ];
        default:
            return [];
    }
}
}),
"[project]/apps/web/src/app/api/agents/chat/route.ts [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "GET",
    ()=>GET,
    "POST",
    ()=>POST,
    "runtime",
    ()=>runtime
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/server.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$openai$2f$agents$2f$dist$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@openai/agents/dist/index.mjs [app-route] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$openai$2f$agents$2d$core$2f$dist$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@openai/agents-core/dist/index.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$openai$2f$agents$2d$core$2f$dist$2f$tracing$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@openai/agents-core/dist/tracing/index.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$openai$2f$agents$2d$openai$2f$dist$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@openai/agents-openai/dist/index.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$convex$2f$dist$2f$esm$2f$browser$2f$index$2d$node$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/convex/dist/esm/browser/index-node.js [app-route] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$convex$2f$dist$2f$esm$2f$browser$2f$http_client$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/convex/dist/esm/browser/http_client.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$apps$2f$web$2f$convex$2f$_generated$2f$api$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/apps/web/convex/_generated/api.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$replicate$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/replicate/index.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$apps$2f$web$2f$src$2f$app$2f$agentActions$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/apps/web/src/app/agentActions.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$openai$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/openai/index.mjs [app-route] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$openai$2f$client$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__OpenAI__as__default$3e$__ = __turbopack_context__.i("[project]/node_modules/openai/client.mjs [app-route] (ecmascript) <export OpenAI as default>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$openai$2f$helpers$2f$zod$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/openai/helpers/zod.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__ = __turbopack_context__.i("[project]/node_modules/zod/v3/external.js [app-route] (ecmascript) <export * as z>");
var __TURBOPACK__imported__module__$5b$project$5d2f$apps$2f$web$2f$src$2f$services$2f$pineconeService$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/apps/web/src/services/pineconeService.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$apps$2f$web$2f$src$2f$types$2f$metadata$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/apps/web/src/types/metadata.ts [app-route] (ecmascript)");
;
;
;
;
;
;
;
;
;
;
;
;
;
(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$openai$2f$agents$2d$openai$2f$dist$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["setDefaultOpenAIKey"])(("TURBOPACK compile-time falsy", 0) ? "TURBOPACK unreachable" : ("TURBOPACK compile-time value", "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"));
(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$openai$2f$agents$2d$openai$2f$dist$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["setTracingExportApiKey"])(("TURBOPACK compile-time falsy", 0) ? "TURBOPACK unreachable" : ("TURBOPACK compile-time value", "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"));
const replicate = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$replicate$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["default"]({
    auth: ("TURBOPACK compile-time falsy", 0) ? "TURBOPACK unreachable" : ("TURBOPACK compile-time value", "r8_VlCZ1gNabpYZUROVzrk0ithKc8Ty8mJ4Reddi")
});
const openai = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$openai$2f$client$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__OpenAI__as__default$3e$__["default"]({
    apiKey: ("TURBOPACK compile-time falsy", 0) ? "TURBOPACK unreachable" : ("TURBOPACK compile-time value", "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")
});
const runtime = 'nodejs';
// MCP: Sequential Thinking server via stdio
const sequentialThinkingServer = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$openai$2f$agents$2d$core$2f$dist$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["MCPServerStdio"]({
    name: 'sequential_thinking',
    fullCommand: 'npx -y @modelcontextprotocol/server-sequential-thinking'
});
/* ------------------------------------------------------------------------------------------------

REVIEW: Types

-------------------------------------------------------------------------------------------------- */ const emailSchema = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].object({
    subject: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string(),
    body: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string(),
    businessName: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string(),
    templateUsed: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string(),
    websiteName: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string(),
    reasonForUsingTemplate: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string().describe('The reason for using the template. No longer than 100 words.')
});
/* ------------------------------------------------------------------------------------------------

REVIEW: Constants

-------------------------------------------------------------------------------------------------- */ const emailTemplates = [
    {
        name: 'Last 10 Jobs → Neighbors',
        description: 'Neighborhood Reactivation campaign targeting neighbors of recent job sites',
        template: `Subject options:
    - Your last 10 jobs = fast new leads
    - Neighbors are 10x more likely to hire you
    - Turn finished work into more jobs this week

      Body:
      Hey [First Name/Company Name],
      Send me your last 10 jobs and I'll launch a Neighborhood Reactivation: we hit the homes around those addresses with a clean postcard design. Neighbors who saw your crew are 10x more likely to call. Approve the proof and we'll have mail out in <5 days.
      Want me to pull the list or do you have it handy?
      – Team DOPE`
    },
    {
        name: 'No Minimum. Upload & Go.',
        description: 'Flexible campaign with no minimums for quick job list targeting',
        template: `Subject options:
    - No minimum—upload and mail in <5 days
    - Hit any job list fast (10, 20, 50+)
    - Simple way to fill your schedule

    Body:
    Hey [First Name/Company Name],
    Upload your last 10 (or 20, or 50) jobs—no minimums. We'll target the neighbors with postcards and get them out in under 5 days. Warm area, quick turnaround, predictable results.
    Reply "GO" and I'll set it up now.
    – Team DOPE`
    },
    {
        name: 'Mail Out in <5 Days',
        description: 'Quick turnaround campaign focusing on speed and neighboring areas',
        template: `Subject options:
    - Quick win: more jobs this week
    - Postcards in mailboxes in under 5 days
    - Your next jobs are right next door

    Body:
    Hey [First Name/Company Name],
    You've already done the hard part. Send your recent job addresses, approve a postcard, and we'll mail the neighbors in <5 days. It's fast, affordable, and focuses on the exact neighborhoods you want.
    Ready to launch this week?
    – Team DOPE`
    }
];
const whoIsDopeMarketing = `
    Who is DOPE Marketing?

    Dope Marketing is a data-driven marketing platform and direct print and mail company specializing in making marketing predictable, data-driven, and friction-free for businesses aiming to grow. Founded by CEO Dave Carroll, the company emerged to simplify direct mail, growing from a software solution to a 100+ person operation with its own 40,000 sq. ft. print facility and a full SaaS platform.

    Their core offering is automated direct mail, which integrates with CRMs for hyperlocal targeting and offers services with no minimum order. Dope Marketing caters primarily to local and home service brands such as roofers, lawn care, pest control, remodelers, HVAC, plumbing, and electrical, but also serves various other industries including real estate, insurance, and restaurants.

    Key features and services include:

    Direct Mail Automation: Sending postcards, handwritten notes, and gifts automatically based on triggers from a business's CRM.

    Neighborhood Blitz: A tool for highly targeted mailings to specific geographic areas or demographics, leveraging CRM data.

    CRM Integrations: Seamlessly connecting with popular CRMs like GoHighLevel, Zapier, Salesforce, and HubSpot to automate marketing efforts.

    In-house Design and Production: They own both the technology and the print shop, ensuring control over every step from design (with a dedicated team and templates) to printing and shipping.

    Print Products: Beyond automated mail, they offer yard signs, door hangers, and business cards.

    No Minimum Orders: Allowing businesses of all sizes to utilize their services.

    Tracking: Providing visibility into campaign performance.

    Dope Marketing differentiates itself through its comprehensive, data-driven approach, owning the entire direct mail process, and its strong focus on helping local and home service businesses achieve measurable ROI. The "DOPE" in their name stands for "Data On Previous Engagement".
`;
const dopeVoice = `

DOPE VOICE — Compact Guide (use for every email)

You are Dope Marketing’s senior conversion copywriter. Adopt one consistent voice for every outbound email: direct, pragmatic, and action‑first. About 70% matter‑of‑fact, 30% purposeful founder energy. Short sentences, active verbs, concrete offers, and one clear reply‑based CTA are non‑negotiable.

Core priority: personalization that converts

When the user provides client info, weave that information into the subject or preview and or body so the message feels specific and relevant.
Use client info to make one concrete, believable claim (e.g., “Given your Little Canada house‑wash offering, a 7‑day pilot in one neighborhood usually surfaces booked jobs”) — do NOT invent data or claim site scans unless the user explicitly provided those facts.
Use no more than one or two/ specific signals to avoid overload; keep personalization tight and evidence‑based.
Personalization should always support an immediate conversion action (pilot, audit, inspection).
Voice & tone

Direct and assertive; outcome-driven (booked jobs, CPL, lift).
Confident and efficient — professional but energetic; avoid jokes, slang, or personal anecdotes.
Subtle urgency/seasonality allowed when relevant (e.g., “fall leaf load,” “pre‑winter”).
Structure & format (required)

Output exactly these labeled fields:
Subject: [≤ 7 words, benefit-driven, may include one token like City or Service]
Preview: [1-line clarifier, ~8–12 words]
Body: [80–140 words — single paragraph or 2 short paragraphs; optional 1–3 bullets max]
Signoff: —Dope Marketing
Exactly one CTA and it must be reply-text (e.g., Reply “YES”, Reply “Set it up”, Reply “Go”). No multiple CTAs or link-first CTAs in initial outreach.
Content rules

Open with a 1-line hook that uses the provided client signal (if any) and frames a specific problem or seasonal trigger (e.g., “For Little Canada homes, fall gutters create winter risk”). If no signal provided, use a neutral industry hook.
Follow with a short insight/benefit (1–2 sentences) using active verbs: run, test, pilot, measure, automate, scale.
Offer must be one sentence and scoped: what Dope will do, what client does, and what deliverable/metric is delivered (e.g., “7‑day pilot — we run ads, deliver booked list + HubSpot metrics”).
Include one credibility token when appropriate (HubSpot, CPL, booked job, before/after photos, years in market).
Personalization limit: at most one specific signal beyond Company to keep messages sharp and believable.
Language & phrasing

Short, punchy sentences. Active voice.
Use numeric quantifiers and concrete timeframes (7‑day pilot, 20‑minute audit, 30‑minute inspection).
Favor reply CTAs and low‑friction asks.
Avoid corporate buzzwords and emotional fluff.
Include one small proof point in follow-ups if available (metric + similar client).
Bullets

Use bullets only for clarity (2–4 items maximum). Each ≤ 10 words.
Length & quality checks

Body length: 80–140 words. Truncate if longer.
Exactly one reply-based CTA.
No jokes, slang, or founder anecdotes.
Use at least one credibility token when relevant.
Subject ≤ 7 words and benefit-focused.
Tokens/phrases to use

pilot, run, test, measure, ship, automate, track, CPL, booked job(s), HubSpot, photo documentation, neighborhood push, booking flow, steam ice-dam removal, 7‑day pilot, 20‑minute audit.
Prohibitions

Do not invent facts or attribute actions you haven’t been given. Only use client details the user supplies.
No more than one casual/founder‑energy phrase per email and only if it aids clarity.
Clarifying rule

If required input is missing (Company, Service, or CTA), ask exactly one clarifying question instead of guessing.

`;
const whenToUseTools = `

  If you are given a task with more than 1 step, you must use sequential thinking to plan out the task first.
  Then, you must use the appropriate tool to complete each step.
  Then, you must return the final result to the user.

  If you are given a task or find you need up to date information, you can use your best judgement on if the web search tool would be useful.

  If a user says: I want to use your web search tool to... then you should use the web search tool.
  I want to use your thinking mode tool to... then you should use the sequential thinking tool.

`;
const howToGenerateAProsal = `

  HOW TO GENERATE A PROPOSAL:

  First, if you are given a client list/ list of client information, attempt to identify the website of the business based on the emails in the data.
  Then, give the website name, business name, and if the user explicitly requested a template, give the template name to the email_creation_by_website_and_template tool.
  Then use the list_how_to_generate_a_proposal tool to understand what I am looking for in the response, what to avoid, and how to format the email.
  Last, give back afew things to the user. Provide the Subject, Body (fully filled in, placeholders filled in, ready to send with context scraped from the website weaved in as well), Business Name (preferably from the scraped website data), the template used, and the reasoning for using the template. This email needs to literally be ready to send, placeholders filled in, and fully ready to go.

  What to avoid
  Long paragraphs. Jargon. Multiple CTAs. Vague promises. Overuse of emojis.
  Do not use and I mean NEVER use "---" in the email to separate sections, trains of thought, etc. This is a tell tale sign of a bot. Do not use "---" in the email.
  The Body you generate needs to be fully filled in, placeholders filled in, ready to send with context scraped from the website weaved in as well. Like I need to be able to copy it a paste it directly into an email client and have it be ready to send.
  Format it in a way where it is the easiest to do that

`;
// Simple content extraction for saved messages
const extractContent = (content)=>{
    if (typeof content === 'string') {
        return content;
    } else if (content && typeof content === 'object') {
        if (content.text) return content.text;
        if (content.content) return content.content;
        if (Array.isArray(content)) {
            return content.map((c)=>typeof c === 'string' ? c : c.text || c.content || JSON.stringify(c)).join(' ');
        }
        return JSON.stringify(content);
    }
    return String(content || '');
};
const generateConversationTitle = async (firstMessage)=>{
    try {
        const systemPrompt = `
    You are a helpful assistant that generates short, descriptive titles for conversations.
    Create a concise title (max 50 characters) that captures the main topic or intent of the conversation.
    Be specific and avoid generic titles like "Chat" or "Conversation".
    `;
        const userPrompt = `
    Generate a title for this conversation that starts with: "${firstMessage}"
    `;
        const response = await openai.chat.completions.create({
            model: "gpt-5-nano",
            messages: [
                {
                    role: "system",
                    content: systemPrompt
                },
                {
                    role: "user",
                    content: userPrompt
                }
            ],
            max_completion_tokens: 20,
            temperature: 0.7
        });
        return response.choices[0]?.message?.content?.trim() || "New Chat";
    } catch (error) {
        console.error('Error generating conversation title:', error);
        // Return a fallback title based on the first message
        const truncatedMessage = firstMessage.substring(0, 30);
        return truncatedMessage.length < firstMessage.length ? `${truncatedMessage}...` : truncatedMessage;
    }
};
/* ------------------------------------------------------------------------------------------------

REVIEW TOOLS FOR HERMES

-------------------------------------------------------------------------------------------------- */ const listTemplatesTool = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$openai$2f$agents$2d$core$2f$dist$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["tool"])({
    name: 'list_templates',
    description: 'List all the templates available',
    parameters: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].object({}),
    execute: async (input)=>{
        return emailTemplates;
    }
});
const emailCreationByWebsiteAndTemplateTool = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$openai$2f$agents$2d$core$2f$dist$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["tool"])({
    name: 'email_creation_by_website_and_template',
    description: 'Create an email based on a website and template',
    parameters: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].object({
        websiteName: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string().describe('The website to use for scraping'),
        businessName: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string().describe('The business name to use'),
        userRequestedTemplateName: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string().nullable().describe('The template to use if the user explicitly requested it')
    }),
    execute: async (input)=>{
        const { websiteName, businessName, userRequestedTemplateName } = input;
        const allScrapedWebsiteInformation = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$apps$2f$web$2f$src$2f$app$2f$agentActions$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["analyzeWebsiteViaFirecrawl"])(websiteName, 'content');
        // Prefer structured extraction result from Firecrawl; fallback to OpenAI summarizer if unavailable
        const tailoredSummaryOfWebsiteScrape = allScrapedWebsiteInformation?.structured;
        const systemPrompt = `Your goal is to write a higly personlized outreach email FROM DOPE TO a potential client using all the information provided to you.

    Here is some information about DOPE Marketing:
    ${whoIsDopeMarketing}

    Here is the voice of DOPE Marketing:
    ${dopeVoice}


  EMAIL TEMPLATES TO USE (from DOPE's perspective), you must use one of these templates:
  ${emailTemplates.map((template)=>`Name: ${template.name}\nDescription: ${template.description}\nTemplate: ${template.template}`).join('\n\n')}


    Generate a complete, personalized marketing email FROM DOPE TO ${businessName}.`;
        const userPrompt = `

    TARGET BUSINESS NAME:
    ${businessName}

    TARGET BUSINESS WEBSITE INFORMATION:
    ${tailoredSummaryOfWebsiteScrape}

    ${userRequestedTemplateName ? `
      The User explicitly requested the following template: ${emailTemplates.find((template)=>template.name === userRequestedTemplateName)?.name}` : ``}

    Generate a complete, personalized marketing email FROM DOPE TO ${businessName}.`;
        const response = await openai.responses.parse({
            model: "gpt-5-mini",
            input: [
                {
                    role: "system",
                    content: systemPrompt
                },
                {
                    role: "user",
                    content: userPrompt
                }
            ],
            text: {
                format: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$openai$2f$helpers$2f$zod$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["zodTextFormat"])(emailSchema, "email")
            }
        });
        const emailResponseData = response.output_parsed;
        return {
            subject: emailResponseData?.subject,
            body: emailResponseData?.body,
            businessName: emailResponseData?.businessName,
            templateUsed: emailResponseData?.templateUsed,
            websiteName: emailResponseData?.websiteName,
            reasonForUsingTemplate: emailResponseData?.reasonForUsingTemplate
        };
    }
});
const listHowToGenerateAProsal = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$openai$2f$agents$2d$core$2f$dist$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["tool"])({
    name: 'list_how_to_generate_a_proposal',
    description: 'List the steps to generate a proposal',
    parameters: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].object({}),
    execute: async (input)=>{
        return howToGenerateAProsal;
    }
});
/* ------------------------------------------------------------------------------------------------

REVIEW TOOLS FOR STEVE

-------------------------------------------------------------------------------------------------- */ const facilitateStandupTool = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$openai$2f$agents$2d$core$2f$dist$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["tool"])({
    name: 'facilitate_standup',
    description: 'Help facilitate standup meetings and team communication',
    parameters: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].object({
        teamSize: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number().describe('Number of team members'),
        agenda: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string().nullable().optional().describe('Specific agenda items')
    }),
    execute: async (input)=>{
        const { teamSize, agenda } = input;
        const standupStructure = [
            '# Standup Meeting Structure\n\n',
            '## Standard Format\n',
            '- What did you accomplish yesterday?\n',
            '- What will you work on today?\n',
            '- Are there any blockers or challenges?\n\n',
            `## Team Size: ${teamSize} members\n`,
            `**Recommended duration:** ${Math.ceil(teamSize * 2)} minutes\n\n`,
            agenda ? `## Additional Agenda Items\n${agenda}\n\n` : '',
            '## Best Practices\n',
            '- Keep updates concise and focused\n',
            '- Address blockers immediately after standup\n',
            '- Encourage team collaboration and support'
        ];
        return standupStructure.join('');
    }
});
/* ------------------------------------------------------------------------------------------------

REVIEW TOOLS FOR ATLAS

-------------------------------------------------------------------------------------------------- */ const analyzeWebsiteTool = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$openai$2f$agents$2d$core$2f$dist$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["tool"])({
    name: 'analyze_website',
    description: `Conduct website analysis for business intelligence and competitive insights.
  
  If the analysis type is "gather-style-of-speaking", you need to take the results and come up with a master plan for the style of speaking of the website.
  Think lexicon, tone, stlye, go in depth.
  This needs to be somehting that is directly useful for an Ai to use to speak like how you notice on the website.

  `,
    parameters: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].object({
        websiteUrl: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string().describe('URL of the website to analyze'),
        analysisType: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string().describe('Type of analysis: content, gather-style-of-speaking')
    }),
    execute: async (input)=>{
        const { websiteUrl, analysisType } = input;
        let allScrapedWebsiteInformation = null;
        let tailoredSummaryOfWebsiteScrape = null;
        let styleOfSpeaking = null;
        if (analysisType === 'gather-style-of-speaking') {
            /* 
      ------------------------------------------------------------
      We want to gather the style of speaking of the website.
      Because of this, we need to gather more information from the website.
      Thus, the limit is set to 50.
      ------------------------------------------------------------
      */ styleOfSpeaking = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$apps$2f$web$2f$src$2f$app$2f$agentActions$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["analyzeWebsiteViaFirecrawl"])(websiteUrl, analysisType);
            return {
                websiteUrl: websiteUrl,
                analysisType: analysisType,
                source: styleOfSpeaking?.source,
                styleOfSpeaking: styleOfSpeaking?.structured
            };
        } else {
            allScrapedWebsiteInformation = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$apps$2f$web$2f$src$2f$app$2f$agentActions$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["analyzeWebsiteViaFirecrawl"])(websiteUrl, analysisType);
            tailoredSummaryOfWebsiteScrape = allScrapedWebsiteInformation?.structured;
            return {
                websiteUrl: websiteUrl,
                analysisType: analysisType,
                tailoredSummaryOfWebsiteScrape: tailoredSummaryOfWebsiteScrape
            };
        }
    }
});
const deepResearchTool = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$openai$2f$agents$2d$core$2f$dist$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["tool"])({
    name: 'deep_research',
    description: 'Research ANYTHING - companies, people, topics, industries, trends, technologies, etc. Completely flexible research tool for any query.',
    parameters: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].object({
        researchQuery: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string().describe('What you want to research. Examples: "Tesla competitors", "AI trends 2024", "How does Netflix content strategy work", "Sustainable packaging solutions", "Remote work productivity tools", etc.'),
        websiteUrl: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string().optional().nullable().describe('Optional: Include a specific website to focus research on, or null to research the topic generally')
    }),
    execute: async (input)=>{
        const { researchQuery, websiteUrl } = input;
        return await (0, __TURBOPACK__imported__module__$5b$project$5d2f$apps$2f$web$2f$src$2f$app$2f$agentActions$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["deepResearchAnything"])(researchQuery, websiteUrl || undefined);
    }
});
/* ------------------------------------------------------------------------------------------------

REVIEW TOOLS FOR JUNO

-------------------------------------------------------------------------------------------------- */ const queryDataTool = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$openai$2f$agents$2d$core$2f$dist$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["tool"])({
    name: 'query_data',
    description: 'Connect to data analytics tools and provide insights',
    parameters: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].object({
        dataSource: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string().describe('The data source or database to query'),
        queryType: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string().describe('Type of analysis: performance, trends, comparison')
    }),
    execute: async (input)=>{
        const { dataSource, queryType } = input;
        // Mock data analysis (would connect to Metabase in production)
        const dataInsights = [
            `# Data Analytics Report\n\n`,
            `**Data Source:** ${dataSource}\n`,
            `**Query Type:** ${queryType}\n\n`,
            `## Key Metrics\n`,
            `- Performance indicators show positive trends\n`,
            `- Data quality is within acceptable parameters\n`,
            `- Recent patterns indicate growth opportunities\n\n`,
            `## Insights\n`,
            `- Recommendation: Focus on high-performing segments\n`,
            `- Consider expanding successful strategies\n`,
            `- Monitor key performance indicators regularly\n\n`,
            `## Next Steps\n`,
            `- Set up automated reporting for continuous monitoring\n`,
            `- Implement data-driven decision making processes\n`,
            `- Schedule regular analysis reviews`
        ];
        return dataInsights.join('');
    }
});
/* ------------------------------------------------------------------------------------------------

REVIEW TOOLS FOR DOPE ADMIN

-------------------------------------------------------------------------------------------------- */ // pinecone tools
const pineconeListIndexesTool = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$openai$2f$agents$2d$core$2f$dist$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["tool"])({
    name: 'pinecone_list_indexes',
    description: 'List all the indexes in Pinecone',
    parameters: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].object({}),
    execute: async (input)=>{
        return await (0, __TURBOPACK__imported__module__$5b$project$5d2f$apps$2f$web$2f$src$2f$services$2f$pineconeService$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["listIndexesFromPinecone"])();
    }
});
const pineconeCreateIndexTool = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$openai$2f$agents$2d$core$2f$dist$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["tool"])({
    name: 'pinecone_create_index',
    description: 'Create a new Pinecone index',
    parameters: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].object({
        indexName: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string().describe('The name of the Pinecone index to create')
    }),
    execute: async (input)=>{
        const { indexName } = input;
        return await (0, __TURBOPACK__imported__module__$5b$project$5d2f$apps$2f$web$2f$src$2f$services$2f$pineconeService$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createIndex"])(indexName);
    }
});
const pineconeAddEmployeeDataToIndexTool = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$openai$2f$agents$2d$core$2f$dist$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["tool"])({
    name: 'pinecone_add_employee_data_to_index',
    description: 'Add employee data to a Pinecone index.',
    parameters: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].object({
        data: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].object({
            employeeData: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].object({
                employeeId: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string().describe('Employee ID'),
                name: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string().describe('Full name'),
                organization: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string().describe('Organization'),
                position: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string().describe('Position'),
                reportsTo: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string().describe('Reports to'),
                gender: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string().optional().nullable().describe('Gender'),
                assessmentDate: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string().describe('Assessment date'),
                all34: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].array(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string()).describe('All 34 strengths'),
                leadDomain: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].enum([
                    'Executing',
                    'Influencing',
                    'Relationship Building',
                    'Strategic Thinking'
                ]).describe('Lead domain'),
                themeDomains: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].object({
                    Executing: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].array(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string()),
                    Influencing: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].array(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string()),
                    RelationshipBuilding: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].array(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string()),
                    StrategyThinking: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].array(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string())
                }).describe('Theme domains'),
                bestCollabWith: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string().describe('Best collaboration description'),
                communicationTips: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string().describe('Communication tips'),
                howToCoach: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string().describe('How to coach'),
                motivators: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].array(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string()).describe('Motivators'),
                demotivators: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].array(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string()).describe('Demotivators'),
                watchouts: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string().describe('Watchouts'),
                evidenceQuotes: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].array(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].object({
                    quote: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string(),
                    section: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string()
                })).describe('Evidence quotes'),
                sourceDocUrl: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string().optional().nullable().describe('Source document URL'),
                sourceProvenance: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string().optional().nullable().describe('Source provenance')
            }).describe('Employee data'),
            tags: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].array(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string()).optional().nullable().describe('Tags for categorization'),
            source: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string().optional().nullable().describe('Source information')
        }).describe('The employee data to add to the Pinecone index')
    }),
    execute: async (input)=>{
        const { data } = input;
        return await (0, __TURBOPACK__imported__module__$5b$project$5d2f$apps$2f$web$2f$src$2f$services$2f$pineconeService$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["addEmployeeDataToIndex"])('dope-employee-data', data);
    }
});
const pineconeAddTranscriptDataToIndexTool = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$openai$2f$agents$2d$core$2f$dist$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["tool"])({
    name: 'pinecone_add_transcript_data_to_index',
    description: 'Add transcript data to a Pinecone index',
    parameters: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].object({
        data: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].object({
            transcriptData: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].object({
                title: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string().describe('The title of the transcript'),
                meetingType: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].enum([
                    'interview',
                    'call',
                    'meeting',
                    'presentation',
                    'other'
                ]).optional().nullable(),
                duration: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number().optional().nullable().describe('Duration in minutes'),
                participants: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].array(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string()).optional().nullable(),
                location: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string().optional().nullable(),
                department: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string().optional().nullable(),
                confidentialityLevel: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].enum([
                    'public',
                    'internal',
                    'confidential',
                    'restricted'
                ]).optional().nullable(),
                action_items: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].array(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string()).optional().nullable(),
                concepts_discussed: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].array(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string()).optional().nullable(),
                date: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string().optional().nullable(),
                key_topics: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].array(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string()).optional().nullable(),
                summary: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string().optional().nullable()
            }).describe('Transcript metadata'),
            tags: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].array(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string()).optional().nullable(),
            source: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string().optional().nullable()
        }).describe('The transcript data to add to the Pinecone index')
    }),
    execute: async (input)=>{
        const { data } = input;
        const td = data.transcriptData || {};
        const cleaned = {
            transcriptData: {
                title: td.title ?? undefined,
                meetingType: td.meetingType ?? undefined,
                duration: td.duration ?? undefined,
                participants: Array.isArray(td.participants) ? td.participants : td.participants ?? undefined,
                location: td.location ?? undefined,
                department: td.department ?? undefined,
                confidentialityLevel: td.confidentialityLevel ?? undefined,
                action_items: Array.isArray(td.action_items) ? td.action_items : td.action_items ?? undefined,
                concepts_discussed: Array.isArray(td.concepts_discussed) ? td.concepts_discussed : td.concepts_discussed ?? undefined,
                date: td.date ?? undefined,
                key_topics: Array.isArray(td.key_topics) ? td.key_topics : td.key_topics ?? undefined,
                summary: td.summary ?? undefined
            },
            tags: Array.isArray(data.tags) ? data.tags : data.tags ?? undefined,
            source: data.source ?? undefined
        };
        return await (0, __TURBOPACK__imported__module__$5b$project$5d2f$apps$2f$web$2f$src$2f$services$2f$pineconeService$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["addTranscriptDataToIndex"])('dope-transcript-data', cleaned);
    }
});
// pinecone add to index
const pineconeAddToIndexTool = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$openai$2f$agents$2d$core$2f$dist$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["tool"])({
    name: 'pinecone_add_to_index',
    description: 'Add data to a Pinecone index',
    parameters: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].object({
        indexName: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string().describe('The name of the Pinecone index to add data to. The current indexes are: ' + Object.values(__TURBOPACK__imported__module__$5b$project$5d2f$apps$2f$web$2f$src$2f$types$2f$metadata$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["INDEX_TYPES"]).join(', ')),
        data: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].object({
            title: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string().describe('The title of the document'),
            content: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string().describe('The content to add to the index'),
            // Restrict metadata to JSON-safe primitives and arrays so the schema has explicit types
            metadata: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].record(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string(), __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].union([
                __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string(),
                __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number(),
                __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].boolean(),
                __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].array(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string()),
                __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].array(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number()),
                __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].array(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].boolean())
            ])).optional().nullable().describe('Optional metadata for the document (string/number/boolean or arrays of these values only).')
        }).describe('The data to add to the Pinecone index')
    }),
    execute: async (input)=>{
        const { indexName, data } = input;
        return await (0, __TURBOPACK__imported__module__$5b$project$5d2f$apps$2f$web$2f$src$2f$services$2f$pineconeService$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["addToIndex"])(indexName, {
            title: data.title,
            content: data.content,
            metadata: data.metadata || undefined
        });
    }
});
// pinecone semantic search tool
const pineconeSemanticSearchTool = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$openai$2f$agents$2d$core$2f$dist$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["tool"])({
    name: 'pinecone_semantic_search',
    description: 'Perform semantic search on a Pinecone index using query text (requires integrated embeddings).',
    parameters: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].object({
        indexName: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string().describe('Index name to search in, it is your job to pick the right appropriate index to search in. The current indexes are: dope-email-templates (Email Templates), dope-transcript-data (Transcript Data), dope-faq-data (FAQ Data), dope-company-knowledge (Company Knowledge), dope-employee-data (Employee Data)'),
        query: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string().describe('The query text to search for'),
        topK: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number().int().positive().max(1000).optional().nullable().describe('Number of similar records to return (default 5)'),
        fields: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].array(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string()).optional().nullable().describe('Optional list of fields to include in results')
    }),
    execute: async (input)=>{
        const { indexName, query, topK, fields } = input;
        const response = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$apps$2f$web$2f$src$2f$services$2f$pineconeService$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["semanticSearch"])(indexName, {
            query,
            topK: topK ?? undefined,
            namespace: '__default__',
            fields: fields ?? undefined
        });
        return response;
    }
});
// dope-company-knowledge semantic search tool
const pineconeCompanyKnowledgeSemanticSearchTool = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$openai$2f$agents$2d$core$2f$dist$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["tool"])({
    name: 'pinecone_company_knowledge_semantic_search',
    description: 'Perform semantic search on the dope-company-knowledge index',
    parameters: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].object({
        query: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string().describe('The query text to search for')
    }),
    execute: async (input)=>{
        const { query } = input;
        return await (0, __TURBOPACK__imported__module__$5b$project$5d2f$apps$2f$web$2f$src$2f$services$2f$pineconeService$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["semanticSearch"])('dope-company-knowledge', {
            query,
            topK: 5,
            namespace: '__default__',
            fields: undefined
        });
    }
});
// dope-employee-data semantic search tool
const pineconeEmployeeDataSemanticSearchTool = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$openai$2f$agents$2d$core$2f$dist$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["tool"])({
    name: 'pinecone_employee_data_semantic_search',
    description: 'Perform semantic search on the dope-employee-data index',
    parameters: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].object({
        query: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string().describe('The query text to search for')
    }),
    execute: async (input)=>{
        const { query } = input;
        return await (0, __TURBOPACK__imported__module__$5b$project$5d2f$apps$2f$web$2f$src$2f$services$2f$pineconeService$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["semanticSearch"])('dope-employee-data', {
            query,
            topK: 5,
            namespace: '__default__',
            fields: undefined
        });
    }
});
// dope-transcript-data semantic search tool
const pineconeTranscriptDataSemanticSearchTool = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$openai$2f$agents$2d$core$2f$dist$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["tool"])({
    name: 'pinecone_transcript_data_semantic_search',
    description: 'Perform semantic search on the dope-transcript-data index',
    parameters: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].object({
        query: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string().describe('The query text to search for')
    }),
    execute: async (input)=>{
        const { query } = input;
        return await (0, __TURBOPACK__imported__module__$5b$project$5d2f$apps$2f$web$2f$src$2f$services$2f$pineconeService$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["semanticSearch"])('dope-transcript-data', {
            query,
            topK: 5,
            namespace: '__default__',
            fields: undefined
        });
    }
});
// dope-email-templates semantic search tool
const pineconeEmailTemplatesSemanticSearchTool = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$openai$2f$agents$2d$core$2f$dist$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["tool"])({
    name: 'pinecone_email_templates_semantic_search',
    description: 'Perform semantic search on the dope-email-templates index',
    parameters: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].object({
        query: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string().describe('The query text to search for')
    }),
    execute: async (input)=>{
        const { query } = input;
        return await (0, __TURBOPACK__imported__module__$5b$project$5d2f$apps$2f$web$2f$src$2f$services$2f$pineconeService$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["semanticSearch"])('dope-email-templates', {
            query,
            topK: 5,
            namespace: '__default__',
            fields: undefined
        });
    }
});
// dope-faq-data semantic search tool
const pineconeFaqDataSemanticSearchTool = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$openai$2f$agents$2d$core$2f$dist$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["tool"])({
    name: 'pinecone_faq_data_semantic_search',
    description: 'Perform semantic search on the dope-faq-data index',
    parameters: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].object({
        query: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string().describe('The query text to search for')
    }),
    execute: async (input)=>{
        const { query } = input;
        return await (0, __TURBOPACK__imported__module__$5b$project$5d2f$apps$2f$web$2f$src$2f$services$2f$pineconeService$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["semanticSearch"])('dope-faq-data', {
            query,
            topK: 5,
            namespace: '__default__',
            fields: undefined
        });
    }
});
/* ------------------------------------------------------------------------------------------------

REVIEW AGENTS

-------------------------------------------------------------------------------------------------- */ const atlasAgent = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$openai$2f$agents$2d$core$2f$dist$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["Agent"]({
    name: 'Atlas',
    instructions: `You are Atlas, a Business Intelligence Agent. You have the ability to conduct website analysis.

  Your key capabilities include:
  - Scanning websites to assess and give the user a deeper understanding of the business.
  - Generating targeted questions based on analyzed data for deeper understanding during interviews.
  - It is nessesary for you to return the information given throguh analysis tools. Don't leave anything out.
  - Being helpful overall and being a good agent.

  What I don't want you to do:
  - Give quick improvement ideas.
  - Conversion & UX suggestions.
  
  Just give the user a good understanding of the business.
  
  Whatever the user asks, use your tools to your advantage. For other specialized tasks, hand off to the appropriate agent.`,
    handoffDescription: 'Atlas - Business Intelligence Agent - Conducts website analysis.',
    tools: [
        analyzeWebsiteTool,
        deepResearchTool
    ],
    mcpServers: [
        sequentialThinkingServer
    ],
    model: "gpt-5-mini",
    modelSettings: {
        parallelToolCalls: true
    }
});
// Agents as tools
const atlasTool = atlasAgent.asTool({
    toolName: 'atlas tool',
    toolDescription: 'Analyze a website for business intelligence.'
});
const hermesAgent = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$openai$2f$agents$2d$core$2f$dist$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["Agent"]({
    name: 'Hermes',
    instructions: `You are Hermes, a Proposal Generator agent for DOPE Marketing. You utilize templates and company information to generate tailored proposals that we can use to sell our services to our clients. 

    ${whoIsDopeMarketing}

    ${dopeVoice}
    
    Your key capabilities include:
    - Creating proposals based on client needs and company standards
    - Integrating insights from previous proposals to enhance relevance and effectiveness
    - Streamlining the proposal creation process for faster turnaround times
    - Supporting the sales team with high-quality, persuasive proposals tailored to each client's unique requirements
    - Being helpful overall and being a good agent.
    
    - NOTE: if the user explicitly requests a template, use the list_templates tool to find the exact template name and then use the userRequestedTemplateName parameter to pass the template name to the email_creation_by_website_and_template tool.
    - NOTE: if the user requests about information on DOPE Marketing, use the pinecone_semantic_search tool to search the DOPE Knowledge Base.

    ${howToGenerateAProsal}.

    When users need proposal generation, use sequential thinking first to plan out the task and then follow the steps to generate a proposal. For other specialized tasks, hand off to the appropriate agent.

    Here are the templates we have available just for reference:
    ${emailTemplates.map((template)=>`- ${template.name}: ${template.description}`).join('\n')}

  `,
    handoffDescription: 'Hermes - Proposal Generator - Creates tailored proposals based on client needs and company standards.',
    tools: [
        listTemplatesTool,
        emailCreationByWebsiteAndTemplateTool,
        listHowToGenerateAProsal,
        pineconeCompanyKnowledgeSemanticSearchTool,
        pineconeEmailTemplatesSemanticSearchTool,
        pineconeTranscriptDataSemanticSearchTool,
        pineconeFaqDataSemanticSearchTool
    ],
    mcpServers: [
        sequentialThinkingServer
    ],
    model: "gpt-5-mini",
    modelSettings: {
        parallelToolCalls: true
    }
});
const steveAgent = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$openai$2f$agents$2d$core$2f$dist$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["Agent"]({
    name: 'Steve',
    instructions: `You are Steve, a Leadership Agent. You leverage CliftonStrengths and employee profiles to enhance team collaboration and development.

  Your key capabilities include:
  - Facilitating standup meetings for improved communication
  - Supporting training and onboarding processes to integrate new employees effectively
  - Assisting in creating performance improvement plans tailored to individual strengths
  - Developing strategic rollout documents to guide organizational initiatives
  
  When users need leadership support, team development, or meeting facilitation, use your tools to provide structured guidance. For other specialized tasks, hand off to the appropriate agent.
  
  SOME TIPS:
    - Be genuinely helpful and interested
    - Ask follow-up questions to keep chatting
    - Always respond conversationally, never like you're searching
    - Ask engaging follow-up questions
  `,
    handoffDescription: 'Steve - Leadership Agent - Enhances team collaboration and development using CliftonStrengths and employee profiles.',
    tools: [
        atlasTool,
        facilitateStandupTool,
        pineconeAddTranscriptDataToIndexTool,
        pineconeCompanyKnowledgeSemanticSearchTool,
        pineconeEmployeeDataSemanticSearchTool,
        pineconeTranscriptDataSemanticSearchTool,
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$openai$2f$agents$2d$openai$2f$dist$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["webSearchTool"])()
    ],
    mcpServers: [
        sequentialThinkingServer
    ],
    model: "gpt-5-mini",
    modelSettings: {
        parallelToolCalls: true
    }
});
const junoAgent = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$openai$2f$agents$2d$core$2f$dist$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["Agent"]({
    name: 'Juno',
    instructions: `You are Juno, a Data Integration Agent. You connect to data analytics tools like Metabase to provide comprehensive data analytics capabilities.

  Your key capabilities include:
  - Centralizing data access to eliminate the need for multiple tools, improving effectiveness
  - Providing insights derived from data analytics to support decision-making processes
  - Currently undergoing testing to ensure seamless connectivity and functionality
  
  When users need data analytics, insights, or database queries, use your tools to provide comprehensive analysis. For other specialized tasks, hand off to the appropriate agent.`,
    handoffDescription: 'Juno - Data Integration Agent - Connects to Metabase and other tools for comprehensive data analytics.',
    tools: [
        queryDataTool,
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$openai$2f$agents$2d$openai$2f$dist$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["webSearchTool"])()
    ],
    mcpServers: [
        sequentialThinkingServer
    ],
    model: "gpt-5-mini",
    modelSettings: {
        parallelToolCalls: true
    }
});
const dopeAdminAgent = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$openai$2f$agents$2d$core$2f$dist$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["Agent"]({
    name: 'Dope Admin',
    instructions: `You are Dope Admin, a Dope Marketing Admin Agent. You are going to help the engineeer complete any tasks and just be helpful overall.
  `,
    handoffDescription: 'Dope Admin - Dope Marketing Admin Agent - Helps the engineer complete any tasks and is helpful overall.',
    tools: [
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$openai$2f$agents$2d$openai$2f$dist$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["webSearchTool"])(),
        pineconeListIndexesTool,
        pineconeCreateIndexTool,
        pineconeAddToIndexTool,
        pineconeAddEmployeeDataToIndexTool,
        pineconeAddTranscriptDataToIndexTool,
        pineconeSemanticSearchTool
    ],
    mcpServers: [
        sequentialThinkingServer
    ],
    model: "gpt-5-mini",
    modelSettings: {
        parallelToolCalls: true
    }
});
// Set up handoffs between agents
hermesAgent.handoffs = [
    steveAgent,
    atlasAgent,
    junoAgent
];
steveAgent.handoffs = [
    hermesAgent,
    atlasAgent,
    junoAgent
];
atlasAgent.handoffs = [
    hermesAgent,
    steveAgent,
    junoAgent
];
junoAgent.handoffs = [
    hermesAgent,
    steveAgent,
    atlasAgent
];
// Request/Response schemas
const ChatRequestSchema = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].object({
    message: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string(),
    threadId: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string().nullable().optional(),
    agentId: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string().optional(),
    userId: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string().optional()
});
const ChatResponseSchema = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].object({
    success: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].boolean(),
    message: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string(),
    agentName: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string(),
    history: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].array(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].any()),
    threadId: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string().optional(),
    lastAgentId: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string().optional(),
    toolCalls: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].array(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].object({
        name: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string(),
        arguments: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].any(),
        result: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].any().optional()
    })).optional()
});
async function POST(request) {
    try {
        const body = await request.json();
        const { message, threadId, agentId, userId } = ChatRequestSchema.parse(body);
        // Initialize Convex client
        const convex = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$convex$2f$dist$2f$esm$2f$browser$2f$http_client$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["ConvexHttpClient"](("TURBOPACK compile-time value", "https://original-turtle-96.convex.cloud"));
        // Determine which agent to start with
        let currentAgent = hermesAgent; // Default to Hermes
        if (agentId === 'hermes') {
            currentAgent = hermesAgent;
        } else if (agentId === 'steve') {
            currentAgent = steveAgent;
        } else if (agentId === 'atlas') {
            currentAgent = atlasAgent;
        } else if (agentId === 'juno') {
            currentAgent = junoAgent;
        } else if (agentId === 'dope-admin') {
            currentAgent = dopeAdminAgent;
        }
        // Get or create thread - SIMPLE VERSION
        let savedMessages = [];
        let currentThreadId = threadId || null;
        if (currentThreadId) {
            // Load existing thread
            const existingThread = await convex.query(__TURBOPACK__imported__module__$5b$project$5d2f$apps$2f$web$2f$convex$2f$_generated$2f$api$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["api"].threads.getThread, {
                threadId: currentThreadId
            });
            if (existingThread) {
                savedMessages = existingThread.history || [];
            }
        } else {
            // Create new thread
            currentThreadId = `thread_${Date.now()}_${Math.random().toString(36).substring(2, 11)}`;
        }
        // Build proper conversation thread with history for context
        const conversationThread = [];
        // Add previous messages from history
        for (const msg of savedMessages){
            if (msg.role === 'user') {
                conversationThread.push((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$openai$2f$agents$2d$core$2f$dist$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["user"])(extractContent(msg.content)));
            } else if (msg.role === 'assistant') {
                // Add assistant messages as system messages to provide context
                conversationThread.push({
                    role: 'system',
                    content: `Previous assistant response: ${extractContent(msg.content)}`
                });
            }
        }
        // Add the new user message
        conversationThread.push((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$openai$2f$agents$2d$core$2f$dist$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["user"])(message));
        // Connect MCP server, run, then close
        await sequentialThinkingServer.connect();
        const result = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$openai$2f$agents$2d$core$2f$dist$2f$tracing$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["withTrace"])('Chat Session', async ()=>{
            return await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$openai$2f$agents$2d$core$2f$dist$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["run"])(currentAgent, conversationThread, {
                maxTurns: 20
            });
        });
        await sequentialThinkingServer.close();
        // Extract tool calls from the result history
        const toolCalls = [];
        if (result.history) {
            const callResults = new Map();
            // First pass: collect function call results
            for (const item of result.history){
                if (item.type === 'function_call_result') {
                    callResults.set(item.callId, item.output);
                }
            }
            // Second pass: collect function calls and match with results
            for (const item of result.history){
                if (item.type === 'function_call') {
                    toolCalls.push({
                        name: item.name,
                        arguments: typeof item.arguments === 'string' ? JSON.parse(item.arguments) : item.arguments,
                        result: callResults.get(item.callId)
                    });
                } else if (item.type === 'hosted_tool_call') {
                    toolCalls.push({
                        name: item.name,
                        arguments: item.providerData?.action || {},
                        result: item.status === 'completed' ? 'Search completed successfully' : item.status
                    });
                }
            }
        }
        // Create simple message history for saving
        const messagesToSave = [
            ...savedMessages,
            {
                role: 'user',
                content: message,
                timestamp: Date.now(),
                agentName: 'user'
            },
            {
                role: 'assistant',
                content: result.finalOutput || 'No response generated',
                timestamp: Date.now(),
                agentName: result.lastAgent?.name || currentAgent.name,
                toolCalls: toolCalls.length > 0 ? toolCalls : undefined
            }
        ];
        // Save to Convex - SIMPLE VERSION
        if (currentThreadId) {
            if (savedMessages.length === 0) {
                // Create new thread
                await convex.mutation(__TURBOPACK__imported__module__$5b$project$5d2f$apps$2f$web$2f$convex$2f$_generated$2f$api$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["api"].threads.createThread, {
                    threadId: currentThreadId,
                    userId: userId,
                    agentId: result.lastAgent?.name.toLowerCase().replace(/\s+/g, '-') || agentId || 'hermes',
                    title: "New Chat",
                    history: messagesToSave
                });
            } else {
                // Update existing thread
                await convex.mutation(__TURBOPACK__imported__module__$5b$project$5d2f$apps$2f$web$2f$convex$2f$_generated$2f$api$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["api"].threads.updateThread, {
                    threadId: currentThreadId,
                    agentId: result.lastAgent?.name.toLowerCase().replace(/\s+/g, '-') || agentId,
                    title: "Chat",
                    history: messagesToSave
                });
            }
        }
        const response = ChatResponseSchema.parse({
            success: true,
            message: result.finalOutput || 'No response generated',
            agentName: result.lastAgent?.name || currentAgent.name,
            history: messagesToSave,
            threadId: currentThreadId,
            lastAgentId: result.lastAgent?.name.toLowerCase().replace(/\s+/g, '-') || agentId,
            toolCalls: toolCalls.length > 0 ? toolCalls : undefined
        });
        return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json(response);
    } catch (error) {
        console.error('Chat API error:', error);
        return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
            success: false,
            error: error instanceof Error ? error.message : 'Unknown error occurred',
            message: 'Sorry, I encountered an error processing your request.',
            agentName: 'System',
            history: []
        }, {
            status: 500
        });
    }
}
async function GET() {
    try {
        const agents = [
            {
                id: 'hermes',
                name: 'Hermes',
                description: 'Proposal Generator - Utilizes templates and company information to generate tailored proposals',
                capabilities: [
                    'web-search',
                    'proposal-generation',
                    'client-analysis',
                    'sales-support'
                ],
                tools: [
                    'list_templates',
                    'email_creation_by_website_and_template',
                    'list_how_to_generate_a_proposal',
                    'pinecone_company_knowledge_semantic_search',
                    'pinecone_email_templates_semantic_search',
                    'pinecone_faq_data_semantic_search'
                ]
            },
            {
                id: 'steve',
                name: 'Steve',
                description: 'Leadership Agent - Leverages CliftonStrengths and employee profiles for team development',
                capabilities: [
                    'web-search',
                    'team-collaboration',
                    'standup-facilitation',
                    'performance-improvement'
                ],
                tools: [
                    'atlas tool',
                    'facilitate_standup',
                    'pinecone_add_transcript_data_to_index',
                    'pinecone_company_knowledge_semantic_search',
                    'pinecone_employee_data_semantic_search',
                    'pinecone_transcript_data_semantic_search',
                    'web_search'
                ]
            },
            {
                id: 'atlas',
                name: 'Atlas',
                description: 'Business Intelligence Agent - Conducts website analysis.',
                capabilities: [
                    'web-search',
                    'website-analysis',
                    'competitive-intelligence',
                    'strategic-recommendations'
                ],
                tools: [
                    'analyze_website',
                    'deep_research'
                ]
            },
            {
                id: 'juno',
                name: 'Juno',
                description: 'Data Integration Agent - Connects to Metabase for comprehensive data analytics',
                capabilities: [
                    'web-search',
                    'data-analytics',
                    'metabase-integration',
                    'decision-support'
                ],
                tools: [
                    'query_data',
                    'web_search'
                ]
            },
            {
                id: 'dope-admin',
                name: 'Dope Admin',
                description: 'Dope Marketing Admin Agent - Helps the engineer complete any tasks and is helpful overall.',
                capabilities: [
                    'web-search',
                    'admin-support'
                ],
                tools: [
                    'web_search',
                    'pinecone_list_indexes',
                    'pinecone_create_index',
                    'pinecone_add_to_index',
                    'pinecone_add_employee_data_to_index',
                    'pinecone_add_transcript_data_to_index',
                    'pinecone_semantic_search'
                ]
            }
        ];
        return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
            success: true,
            data: agents
        });
    } catch (error) {
        console.error('Error fetching chat agents:', error);
        return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
            success: false,
            error: 'Failed to fetch agents'
        }, {
            status: 500
        });
    }
}
}),
];

//# sourceMappingURL=%5Broot-of-the-server%5D__01448ead._.js.map